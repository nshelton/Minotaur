#include "VectorFont.h"

#include <utility>

// The font units are approximately -16..+16 in Y (unitsTall=32).

namespace
{
	using Cmd = VectorFont::Command;

	static std::unordered_map<char, std::vector<Cmd>> makeGlyphs()
	{
		using G = std::vector<Cmd>;
		std::unordered_map<char, G> g;

		g[' '] = G{};
		g['!'] = G{{'M', 0, -12}, {'L', 0, 2}, {'M', 0, 7}, {'L', -1, 8}, {'L', 0, 9}, {'L', 1, 8}, {'L', 0, 7}};
		g['&'] = G{{'M', 0, -10}, {'L', -1, -11}, {'L', 0, -12}, {'L', 1, -11}, {'L', 1, -9}, {'L', 0, -7}, {'L', -1, -6}};
		g['('] = G{{'M', 4, -16}, {'L', 2, -14}, {'L', 0, -11}, {'L', -2, -7}, {'L', -3, -2}, {'L', -3, 2}, {'L', -2, 7}, {'L', 0, 11}, {'L', 2, 14}, {'L', 4, 16}};
		g[')'] = G{{'M', -4, -16}, {'L', -2, -14}, {'L', 0, -11}, {'L', 2, -7}, {'L', 3, -2}, {'L', 3, 2}, {'L', 2, 7}, {'L', 0, 11}, {'L', -2, 14}, {'L', -4, 16}};
		g['*'] = G{{'M', 0, -12}, {'L', 0, 0}, {'M', -5, -9}, {'L', 5, -3}, {'M', 5, -9}, {'L', -5, -3}};
		g['+'] = G{{'M', 0, -9}, {'L', 0, 9}, {'M', -9, 0}, {'L', 9, 0}};
		g[','] = G{{'M', 1, 8}, {'L', 0, 9}, {'L', -1, 8}, {'L', 0, 7}, {'L', 1, 8}, {'L', 1, 10}, {'L', 0, 12}, {'L', -1, 13}};
		g['-'] = G{{'M', -9, 0}, {'L', 9, 0}};
		g['.'] = G{{'M', 0, 7}, {'L', -1, 8}, {'L', 0, 9}, {'L', 1, 8}, {'L', 0, 7}};
		g['/'] = G{{'M', 9, -16}, {'L', -9, 16}};
		g['0'] = G{{'M', -1, -12}, {'L', -4, -11}, {'L', -6, -8}, {'L', -7, -3}, {'L', -7, 0}, {'L', -6, 5}, {'L', -4, 8}, {'L', -1, 9}, {'L', 1, 9}, {'L', 4, 8}, {'L', 6, 5}, {'L', 7, 0}, {'L', 7, -3}, {'L', 6, -8}, {'L', 4, -11}, {'L', 1, -12}, {'L', -1, -12}};
		g['1'] = G{{'M', -4, -8}, {'L', -2, -9}, {'L', 1, -12}, {'L', 1, 9}};
		g['2'] = G{{'M', -6, -7}, {'L', -6, -8}, {'L', -5, -10}, {'L', -4, -11}, {'L', -2, -12}, {'L', 2, -12}, {'L', 4, -11}, {'L', 5, -10}, {'L', 6, -8}, {'L', 6, -6}, {'L', 5, -4}, {'L', 3, -1}, {'L', -7, 9}, {'L', 7, 9}};
		g['3'] = G{{'M', -5, -12}, {'L', 6, -12}, {'L', 0, -4}, {'L', 3, -4}, {'L', 5, -3}, {'L', 6, -2}, {'L', 7, 1}, {'L', 7, 3}, {'L', 6, 6}, {'L', 4, 8}, {'L', 1, 9}, {'L', -2, 9}, {'L', -5, 8}, {'L', -6, 7}, {'L', -7, 5}};
		g['4'] = G{{'M', 3, -12}, {'L', -7, 2}, {'L', 8, 2}, {'M', 3, -12}, {'L', 3, 9}};
		g['5'] = G{{'M', 5, -12}, {'L', -5, -12}, {'L', -6, -3}, {'L', -5, -4}, {'L', -2, -5}, {'L', 1, -5}, {'L', 4, -4}, {'L', 6, -2}, {'L', 7, 1}, {'L', 7, 3}, {'L', 6, 6}, {'L', 4, 8}, {'L', 1, 9}, {'L', -2, 9}, {'L', -5, 8}, {'L', -6, 7}, {'L', -7, 5}};
		g['6'] = G{{'M', 6, -9}, {'L', 5, -11}, {'L', 2, -12}, {'L', 0, -12}, {'L', -3, -11}, {'L', -5, -8}, {'L', -6, -3}, {'L', -6, 2}, {'L', -5, 6}, {'L', -3, 8}, {'L', 0, 9}, {'L', 1, 9}, {'L', 4, 8}, {'L', 6, 6}, {'L', 7, 3}, {'L', 7, 2}, {'L', 6, -1}, {'L', 4, -3}, {'L', 1, -4}, {'L', 0, -4}, {'L', -3, -3}, {'L', -5, -1}, {'L', -6, 2}};
		g['7'] = G{{'M', 7, -12}, {'L', -3, 9}, {'M', -7, -12}, {'L', 7, -12}};
		g['8'] = G{{'M', -2, -12}, {'L', -5, -11}, {'L', -6, -9}, {'L', -6, -7}, {'L', -5, -5}, {'L', -3, -4}, {'L', 1, -3}, {'L', 4, -2}, {'L', 6, 0}, {'L', 7, 2}, {'L', 7, 5}, {'L', 6, 7}, {'L', 5, 8}, {'L', 2, 9}, {'L', -2, 9}, {'L', -5, 8}, {'L', -6, 7}, {'L', -7, 5}, {'L', -7, 2}, {'L', -6, 0}, {'L', -4, -2}, {'L', -1, -3}, {'L', 3, -4}, {'L', 5, -5}, {'L', 6, -7}, {'L', 6, -9}, {'L', 5, -11}, {'L', 2, -12}, {'L', -2, -12}};
		g['9'] = G{{'M', 6, -5}, {'L', 5, -2}, {'L', 3, 0}, {'L', 0, 1}, {'L', -1, 1}, {'L', -4, 0}, {'L', -6, -2}, {'L', -7, -5}, {'L', -7, -6}, {'L', -6, -9}, {'L', -4, -11}, {'L', -1, -12}, {'L', 0, -12}, {'L', 3, -11}, {'L', 5, -9}, {'L', 6, -5}, {'L', 6, 0}, {'L', 5, 5}, {'L', 3, 8}, {'L', 0, 9}, {'L', -2, 9}, {'L', -5, 8}, {'L', -6, 6}};
		g[':'] = G{{'M', 0, -5}, {'L', -1, -4}, {'L', 0, -3}, {'L', 1, -4}, {'L', 0, -5}, {'M', 0, 7}, {'L', -1, 8}, {'L', 0, 9}, {'L', 1, 8}, {'L', 0, 7}};
		g[';'] = G{{'M', 0, -5}, {'L', -1, -4}, {'L', 0, -3}, {'L', 1, -4}, {'L', 0, -5}, {'M', 1, 8}, {'L', 0, 9}, {'L', -1, 8}, {'L', 0, 7}, {'L', 1, 8}, {'L', 1, 10}, {'L', 0, 12}, {'L', -1, 13}};
		g['='] = G{{'M', -9, -3}, {'L', 9, -3}, {'M', -9, 3}, {'L', 9, 3}};
		g['?'] = G{{'M', -6, -7}, {'L', -6, -8}, {'L', -5, -10}, {'L', -4, -11}, {'L', -2, -12}, {'L', 2, -12}, {'L', 4, -11}, {'L', 5, -10}, {'L', 6, -8}, {'L', 6, -6}, {'L', 5, -4}, {'L', 4, -3}, {'L', 0, -1}, {'L', 0, 2}, {'M', 0, 7}, {'L', -1, 8}, {'L', 0, 9}, {'L', 1, 8}, {'L', 0, 7}};
		g['@'] = G{{'M', 5, -4}, {'L', 4, -6}, {'L', 2, -7}, {'L', -1, -7}, {'L', -3, -6}, {'L', -4, -5}, {'L', -5, -2}, {'L', -5, 1}, {'L', -4, 3}, {'L', -2, 4}, {'L', 1, 4}, {'L', 3, 3}, {'L', 4, 1}, {'M', -1, -7}, {'L', -3, -5}, {'L', -4, -2}, {'L', -4, 1}, {'L', -3, 3}, {'L', -2, 4}, {'M', 5, -7}, {'L', 4, 1}, {'L', 4, 3}, {'L', 6, 4}, {'L', 8, 4}, {'L', 10, 2}, {'L', 11, -1}, {'L', 11, -3}, {'L', 10, -6}, {'L', 9, -8}, {'L', 7, -10}, {'L', 5, -11}, {'L', 2, -12}, {'L', -1, -12}, {'L', -4, -11}, {'L', -6, -10}, {'L', -8, -8}, {'L', -9, -6}, {'L', -10, -3}, {'L', -10, 0}, {'L', -9, 3}, {'L', -8, 5}, {'L', -6, 7}, {'L', -4, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 5, 8}, {'L', 7, 7}, {'L', 8, 6}, {'M', 6, -7}, {'L', 5, 1}, {'L', 5, 3}, {'L', 6, 4}};
		g['A'] = G{{'M', 0, -12}, {'L', -8, 9}, {'M', 0, -12}, {'L', 8, 9}, {'M', -5, 2}, {'L', 5, 2}};
		g['B'] = G{{'M', -7, -12}, {'L', -7, 9}, {'M', -7, -12}, {'L', 2, -12}, {'L', 5, -11}, {'L', 6, -10}, {'L', 7, -8}, {'L', 7, -6}, {'L', 6, -4}, {'L', 5, -3}, {'L', 2, -2}, {'M', -7, -2}, {'L', 2, -2}, {'L', 5, -1}, {'L', 6, 0}, {'L', 7, 2}, {'L', 7, 5}, {'L', 6, 7}, {'L', 5, 8}, {'L', 2, 9}, {'L', -7, 9}};
		g['C'] = G{{'M', 8, -7}, {'L', 7, -9}, {'L', 5, -11}, {'L', 3, -12}, {'L', -1, -12}, {'L', -3, -11}, {'L', -5, -9}, {'L', -6, -7}, {'L', -7, -4}, {'L', -7, 1}, {'L', -6, 4}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 3, 9}, {'L', 5, 8}, {'L', 7, 6}, {'L', 8, 4}};
		g['D'] = G{{'M', -7, -12}, {'L', -7, 9}, {'M', -7, -12}, {'L', 0, -12}, {'L', 3, -11}, {'L', 5, -9}, {'L', 6, -7}, {'L', 7, -4}, {'L', 7, 1}, {'L', 6, 4}, {'L', 5, 6}, {'L', 3, 8}, {'L', 0, 9}, {'L', -7, 9}};
		g['E'] = G{{'M', -6, -12}, {'L', -6, 9}, {'M', -6, -12}, {'L', 7, -12}, {'M', -6, -2}, {'L', 2, -2}, {'M', -6, 9}, {'L', 7, 9}};
		g['F'] = G{{'M', -6, -12}, {'L', -6, 9}, {'M', -6, -12}, {'L', 7, -12}, {'M', -6, -2}, {'L', 2, -2}};
		g['G'] = G{{'M', 8, -7}, {'L', 7, -9}, {'L', 5, -11}, {'L', 3, -12}, {'L', -1, -12}, {'L', -3, -11}, {'L', -5, -9}, {'L', -6, -7}, {'L', -7, -4}, {'L', -7, 1}, {'L', -6, 4}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 3, 9}, {'L', 5, 8}, {'L', 7, 6}, {'L', 8, 4}, {'L', 8, 1}, {'M', 3, 1}, {'L', 8, 1}};
		g['H'] = G{{'M', -7, -12}, {'L', -7, 9}, {'M', 7, -12}, {'L', 7, 9}, {'M', -7, -2}, {'L', 7, -2}};
		g['I'] = G{{'M', 0, -12}, {'L', 0, 9}};
		g['J'] = G{{'M', 4, -12}, {'L', 4, 4}, {'L', 3, 7}, {'L', 2, 8}, {'L', 0, 9}, {'L', -2, 9}, {'L', -4, 8}, {'L', -5, 7}, {'L', -6, 4}, {'L', -6, 2}};
		g['K'] = G{{'M', -7, -12}, {'L', -7, 9}, {'M', 7, -12}, {'L', -7, 2}, {'M', -2, -3}, {'L', 7, 9}};
		g['L'] = G{{'M', -6, -12}, {'L', -6, 9}, {'M', -6, 9}, {'L', 6, 9}};
		g['M'] = G{{'M', -8, -12}, {'L', -8, 9}, {'M', -8, -12}, {'L', 0, 9}, {'M', 8, -12}, {'L', 0, 9}, {'M', 8, -12}, {'L', 8, 9}};
		g['N'] = G{{'M', -7, -12}, {'L', -7, 9}, {'M', -7, -12}, {'L', 7, 9}, {'M', 7, -12}, {'L', 7, 9}};
		g['O'] = G{{'M', -2, -12}, {'L', -4, -11}, {'L', -6, -9}, {'L', -7, -7}, {'L', -8, -4}, {'L', -8, 1}, {'L', -7, 4}, {'L', -6, 6}, {'L', -4, 8}, {'L', -2, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}, {'L', 7, 4}, {'L', 8, 1}, {'L', 8, -4}, {'L', 7, -7}, {'L', 6, -9}, {'L', 4, -11}, {'L', 2, -12}, {'L', -2, -12}};
		g['P'] = G{{'M', -7, -12}, {'L', -7, 9}, {'M', -7, -12}, {'L', 2, -12}, {'L', 5, -11}, {'L', 6, -10}, {'L', 7, -8}, {'L', 7, -5}, {'L', 6, -3}, {'L', 5, -2}, {'L', 2, -1}, {'L', -7, -1}};
		g['Q'] = G{{'M', -2, -12}, {'L', -4, -11}, {'L', -6, -9}, {'L', -7, -7}, {'L', -8, -4}, {'L', -8, 1}, {'L', -7, 4}, {'L', -6, 6}, {'L', -4, 8}, {'L', -2, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}, {'L', 7, 4}, {'L', 8, 1}, {'L', 8, -4}, {'L', 7, -7}, {'L', 6, -9}, {'L', 4, -11}, {'L', 2, -12}, {'L', -2, -12}, {'M', 1, 5}, {'L', 7, 11}};
		g['R'] = G{{'M', -7, -12}, {'L', -7, 9}, {'M', -7, -12}, {'L', 2, -12}, {'L', 5, -11}, {'L', 6, -10}, {'L', 7, -8}, {'L', 7, -6}, {'L', 6, -4}, {'L', 5, -3}, {'L', 2, -2}, {'L', -7, -2}, {'M', 0, -2}, {'L', 7, 9}};
		g['S'] = G{{'M', 7, -9}, {'L', 5, -11}, {'L', 2, -12}, {'L', -2, -12}, {'L', -5, -11}, {'L', -7, -9}, {'L', -7, -7}, {'L', -6, -5}, {'L', -5, -4}, {'L', -3, -3}, {'L', 3, -1}, {'L', 5, 0}, {'L', 6, 1}, {'L', 7, 3}, {'L', 7, 6}, {'L', 5, 8}, {'L', 2, 9}, {'L', -2, 9}, {'L', -5, 8}, {'L', -6, 7}, {'L', -7, 5}};
		g['T'] = G{{'M', 0, -12}, {'L', 0, 9}, {'M', -7, -12}, {'L', 7, -12}};
		g['U'] = G{{'M', -7, -12}, {'L', -7, 3}, {'L', -6, 6}, {'L', -4, 8}, {'L', -1, 9}, {'L', 1, 9}, {'L', 4, 8}, {'L', 6, 6}, {'L', 7, 3}, {'L', 7, -12}};
		g['V'] = G{{'M', -8, -12}, {'L', 0, 9}, {'M', 8, -12}, {'L', 0, 9}};
		g['W'] = G{{'M', -10, -12}, {'L', -5, 9}, {'M', 0, -12}, {'L', -5, 9}, {'M', 0, -12}, {'L', 5, 9}, {'M', 10, -12}, {'L', 5, 9}};
		g['X'] = G{{'M', -7, -12}, {'L', 7, 9}, {'M', 7, -12}, {'L', -7, 9}};
		g['Y'] = G{{'M', -8, -12}, {'L', 0, -2}, {'L', 0, 9}, {'M', 8, -12}, {'L', 0, -2}};
		g['Z'] = G{{'M', 7, -12}, {'L', -7, 9}, {'M', -7, -12}, {'L', 7, -12}, {'M', -7, 9}, {'L', 7, 9}};
		g['['] = G{{'M', -3, -16}, {'L', -3, 16}, {'M', -2, -16}, {'L', -2, 16}, {'M', -3, -16}, {'L', 4, -16}, {'M', -3, 16}, {'L', 4, 16}};
		g['\\'] = G{{'M', -7, -12}, {'L', 7, 12}};
		g[']'] = G{{'M', 2, -16}, {'L', 2, 16}, {'M', 3, -16}, {'L', 3, 16}, {'M', -4, -16}, {'L', 3, -16}, {'M', -4, 16}, {'L', 3, 16}};
		g['^'] = G{{'M', -2, -6}, {'L', 0, -9}, {'L', 2, -6}, {'M', -5, -3}, {'L', 0, -8}, {'L', 5, -3}, {'M', 0, -8}, {'L', 0, 9}};
		g['_'] = G{{'M', -8, 11}, {'L', 8, 11}};
		g['`'] = G{{'M', 1, -12}, {'L', 0, -11}, {'L', -1, -9}, {'L', -1, -7}, {'L', 0, -6}, {'L', 1, -7}, {'L', 0, -8}};
		g['a'] = G{{'M', 6, -5}, {'L', 6, 9}, {'M', 6, -2}, {'L', 4, -4}, {'L', 2, -5}, {'L', -1, -5}, {'L', -3, -4}, {'L', -5, -2}, {'L', -6, 1}, {'L', -6, 3}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}};
		g['b'] = G{{'M', -6, -12}, {'L', -6, 9}, {'M', -6, -2}, {'L', -4, -4}, {'L', -2, -5}, {'L', 1, -5}, {'L', 3, -4}, {'L', 5, -2}, {'L', 6, 1}, {'L', 6, 3}, {'L', 5, 6}, {'L', 3, 8}, {'L', 1, 9}, {'L', -2, 9}, {'L', -4, 8}, {'L', -6, 6}};
		g['c'] = G{{'M', 6, -2}, {'L', 4, -4}, {'L', 2, -5}, {'L', -1, -5}, {'L', -3, -4}, {'L', -5, -2}, {'L', -6, 1}, {'L', -6, 3}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}};
		g['d'] = G{{'M', 6, -12}, {'L', 6, 9}, {'M', 6, -2}, {'L', 4, -4}, {'L', 2, -5}, {'L', -1, -5}, {'L', -3, -4}, {'L', -5, -2}, {'L', -6, 1}, {'L', -6, 3}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}};
		g['e'] = G{{'M', -6, 1}, {'L', 6, 1}, {'L', 6, -1}, {'L', 5, -3}, {'L', 4, -4}, {'L', 2, -5}, {'L', -1, -5}, {'L', -3, -4}, {'L', -5, -2}, {'L', -6, 1}, {'L', -6, 3}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}};
		g['f'] = G{{'M', 5, -12}, {'L', 3, -12}, {'L', 1, -11}, {'L', 0, -8}, {'L', 0, 9}, {'M', -3, -5}, {'L', 4, -5}};
		g['g'] = G{{'M', 6, -5}, {'L', 6, 11}, {'L', 5, 14}, {'L', 4, 15}, {'L', 2, 16}, {'L', -1, 16}, {'L', -3, 15}, {'M', 6, -2}, {'L', 4, -4}, {'L', 2, -5}, {'L', -1, -5}, {'L', -3, -4}, {'L', -5, -2}, {'L', -6, 1}, {'L', -6, 3}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}};
		g['h'] = G{{'M', -5, -12}, {'L', -5, 9}, {'M', -5, -1}, {'L', -2, -4}, {'L', 0, -5}, {'L', 3, -5}, {'L', 5, -4}, {'L', 6, -1}, {'L', 6, 9}};
		g['i'] = G{{'M', -1, -12}, {'L', 0, -11}, {'L', 1, -12}, {'L', 0, -13}, {'L', -1, -12}, {'M', 0, -5}, {'L', 0, 9}};
		g['j'] = G{{'M', 0, -12}, {'L', 1, -11}, {'L', 2, -12}, {'L', 1, -13}, {'L', 0, -12}, {'M', 1, -5}, {'L', 1, 12}, {'L', 0, 15}, {'L', -2, 16}, {'L', -4, 16}};
		g['k'] = G{{'M', -5, -12}, {'L', -5, 9}, {'M', 5, -5}, {'L', -5, 5}, {'M', -1, 1}, {'L', 6, 9}};
		g['l'] = G{{'M', 0, -12}, {'L', 0, 9}};
		g['m'] = G{{'M', -11, -5}, {'L', -11, 9}, {'M', -11, -1}, {'L', -8, -4}, {'L', -6, -5}, {'L', -3, -5}, {'L', -1, -4}, {'L', 0, -1}, {'L', 0, 9}, {'M', 0, -1}, {'L', 3, -4}, {'L', 5, -5}, {'L', 8, -5}, {'L', 10, -4}, {'L', 11, -1}, {'L', 11, 9}};
		g['n'] = G{{'M', -5, -5}, {'L', -5, 9}, {'M', -5, -1}, {'L', -2, -4}, {'L', 0, -5}, {'L', 3, -5}, {'L', 5, -4}, {'L', 6, -1}, {'L', 6, 9}};
		g['o'] = G{{'M', -1, -5}, {'L', -3, -4}, {'L', -5, -2}, {'L', -6, 1}, {'L', -6, 3}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}, {'L', 7, 3}, {'L', 7, 1}, {'L', 6, -2}, {'L', 4, -4}, {'L', 2, -5}, {'L', -1, -5}};
		g['p'] = G{{'M', -6, -5}, {'L', -6, 16}, {'M', -6, -2}, {'L', -4, -4}, {'L', -2, -5}, {'L', 1, -5}, {'L', 3, -4}, {'L', 5, -2}, {'L', 6, 1}, {'L', 6, 3}, {'L', 5, 6}, {'L', 3, 8}, {'L', 1, 9}, {'L', -2, 9}, {'L', -4, 8}, {'L', -6, 6}};
		g['q'] = G{{'M', 6, -5}, {'L', 6, 16}, {'M', 6, -2}, {'L', 4, -4}, {'L', 2, -5}, {'L', -1, -5}, {'L', -3, -4}, {'L', -5, -2}, {'L', -6, 1}, {'L', -6, 3}, {'L', -5, 6}, {'L', -3, 8}, {'L', -1, 9}, {'L', 2, 9}, {'L', 4, 8}, {'L', 6, 6}};
		g['r'] = G{{'M', -3, -5}, {'L', -3, 9}, {'M', -3, 1}, {'L', -2, -2}, {'L', 0, -4}, {'L', 2, -5}, {'L', 5, -5}};
		g['s'] = G{{'M', 6, -2}, {'L', 5, -4}, {'L', 2, -5}, {'L', -1, -5}, {'L', -4, -4}, {'L', -5, -2}, {'L', -4, 0}, {'L', -2, 1}, {'L', 3, 2}, {'L', 5, 3}, {'L', 6, 5}, {'L', 6, 6}, {'L', 5, 8}, {'L', 2, 9}, {'L', -1, 9}, {'L', -4, 8}, {'L', -5, 6}};
		g['t'] = G{{'M', 0, -12}, {'L', 0, 5}, {'L', 1, 8}, {'L', 3, 9}, {'L', 5, 9}, {'M', -3, -5}, {'L', 4, -5}};
		g['u'] = G{{'M', -5, -5}, {'L', -5, 5}, {'L', -4, 8}, {'L', -2, 9}, {'L', 1, 9}, {'L', 3, 8}, {'L', 6, 5}, {'M', 6, -5}, {'L', 6, 9}};
		g['v'] = G{{'M', -6, -5}, {'L', 0, 9}, {'M', 6, -5}, {'L', 0, 9}};
		g['w'] = G{{'M', -8, -5}, {'L', -4, 9}, {'M', 0, -5}, {'L', -4, 9}, {'M', 0, -5}, {'L', 4, 9}, {'M', 8, -5}, {'L', 4, 9}};
		g['x'] = G{{'M', -5, -5}, {'L', 6, 9}, {'M', 6, -5}, {'L', -5, 9}};
		g['y'] = G{{'M', -6, -5}, {'L', 0, 9}, {'M', 6, -5}, {'L', 0, 9}, {'L', -2, 13}, {'L', -4, 15}, {'L', -6, 16}, {'L', -7, 16}};
		g['z'] = G{{'M', 6, -5}, {'L', -5, 9}, {'M', -5, -5}, {'L', 6, -5}, {'M', -5, 9}, {'L', 6, 9}};
		g['{'] = G{{'M', 2, -16}, {'L', 0, -15}, {'L', 1, -14}, {'L', 2, -12}, {'L', 2, -10}, {'L', 1, -8}, {'L', 0, -7}, {'L', -1, -5}, {'L', -1, -3}, {'L', 1, -1}, {'M', 0, -15}, {'L', 1, -13}, {'L', 1, -11}, {'L', 0, -9}, {'L', -1, -8}, {'L', -2, -6}, {'L', -2, -4}, {'L', -1, -2}, {'L', 3, 0}, {'L', -1, 2}, {'L', -2, 4}, {'L', -2, 6}, {'L', -1, 8}, {'L', 0, 9}, {'L', 1, 11}, {'L', 1, 13}, {'L', 0, 15}, {'M', 1, 1}, {'L', -1, 3}, {'L', -1, 5}, {'L', 0, 7}, {'L', 1, 8}, {'L', 2, 10}, {'L', 2, 12}, {'L', 1, 14}, {'L', 0, 15}, {'L', -2, 16}};
		g['|'] = G{{'M', 0, -16}, {'L', 0, 16}};
		g['}'] = G{{'M', -2, -16}, {'L', 0, -15}, {'L', -1, -14}, {'L', -2, -12}, {'L', -2, -10}, {'L', -1, -8}, {'L', 0, -7}, {'L', 1, -5}, {'L', 1, -3}, {'L', -1, -1}, {'M', 0, -15}, {'L', -1, -13}, {'L', -1, -11}, {'L', 0, -9}, {'L', 1, -8}, {'L', 2, -6}, {'L', 2, -4}, {'L', 1, -2}, {'L', -3, 0}, {'L', 1, 2}, {'L', 2, 4}, {'L', 2, 6}, {'L', 1, 8}, {'L', 0, 9}, {'L', -1, 11}, {'L', -1, 13}, {'L', 0, 15}, {'M', -1, 1}, {'L', 1, 3}, {'L', 1, 5}, {'L', 0, 7}, {'L', -1, 8}, {'L', -2, 10}, {'L', -2, 12}, {'L', -1, 14}, {'L', 0, 15}, {'L', 2, 16}};
		g['~'] = G{{'M', -9, 3}, {'L', -9, 1}, {'L', -8, -2}, {'L', -6, -3}, {'L', -4, -3}, {'L', -2, -2}, {'L', 2, 1}, {'L', 4, 2}, {'L', 6, 2}, {'L', 8, 1}, {'L', 9, -1}, {'M', -9, 1}, {'L', -8, -1}, {'L', -6, -2}, {'L', -4, -2}, {'L', -2, -1}, {'L', 2, 2}, {'L', 4, 3}, {'L', 6, 3}, {'L', 8, 2}, {'L', 9, -1}, {'L', 9, -3}};

		return g;
	}
}

const std::unordered_map<char, std::vector<VectorFont::Command>> &VectorFont::glyphs()
{
	static const std::unordered_map<char, std::vector<Command>> g = makeGlyphs();
	return g;
}

std::vector<Path> VectorFont::glyphToPaths(const Glyph &cmds, float offsetX_mm, float offsetY_mm, float scale)
{
	std::vector<Path> paths;
	Path current;
	bool hasCurrent = false;
	for (const auto &c : cmds)
	{
		float px = offsetX_mm + c.x * scale;
		float py = offsetY_mm + (-c.y) * scale; // flip Y
		if (c.op == 'M')
		{
			if (hasCurrent && !current.points.empty())
				paths.push_back(std::move(current));
			current = Path{};
			current.closed = false;
			hasCurrent = true;
			current.points.push_back(Vec2{px, py});
		}
		else if (c.op == 'L')
		{
			if (!hasCurrent)
			{
				hasCurrent = true;
				current = Path{};
				current.closed = false;
			}
			current.points.push_back(Vec2{px, py});
		}
	}
	if (hasCurrent && !current.points.empty())
		paths.push_back(std::move(current));
	return paths;
}

float VectorFont::measureGlyphWidthUnits(const Glyph & /*cmds*/)
{
	return 15.0f;
}

std::vector<Path> VectorFont::textToPaths(const std::string &text,
										  float originX_mm,
										  float originY_mm,
										  float height_mm,
										  float letterSpacingUnits)
{
	std::vector<Path> paths;
	const float unitsTall = 32.0f;
	const float scale = (height_mm <= 0.0f) ? (10.0f / unitsTall) : (height_mm / unitsTall);
	float cursorUnitsX = 0.0f;

	const auto &g = glyphs();
	for (char ch : text)
	{
		auto it = g.find(ch);
		float widthUnits = 10.0f;
		if (it != g.end())
		{
			widthUnits = measureGlyphWidthUnits(it->second);
			if (!it->second.empty())
			{
				float ox = originX_mm + cursorUnitsX * scale;
				auto glyphPaths = glyphToPaths(it->second, ox, originY_mm, scale);
				for (auto &p : glyphPaths)
					paths.push_back(std::move(p));
			}
		}
		cursorUnitsX += widthUnits + letterSpacingUnits;
	}
	return paths;
}
